$(function () {

 //  setTimeout(function() {
	//   $('[data-toggle="tooltip"]').tooltip('show');
	// }, 2500);

	// $('#modalCallback').modal('show');

	// setTimeout(function() {
	// 	$('#menuBtn').click();
	// },200);
});

$(function () {
	// Анимация удачной формы

	// $('#modalReview .btn').click(function(e) {
	// 	e.preventDefault();
	// 	var block = $(this).parents('.modal-body');

	// 	block.find('.modal-body__left').slideUp(400);

	// 	setTimeout(function() {
	// 		block.find('.modal_review__thanks').slideDown(400);
	// 	}, 400);
	// })

	$('#cityYes').click(function (e) { 
		e.preventDefault();
		
		$(this).parents('.city_choose').slideUp();
	});

	
	if($('.hamburger--slider').is('.hamburger--slider')) {
		$('.nav-item').click(function() {
			$('.hamburger--slider').toggleClass('is-active');
		})
	}

	// if($('.favorite').is('.favorite')) {
	// 	$('.favorite .dropup').dropup({
	// 		dropupAuto: false,
	// 	});
	// }


	$('.dropup').on('shown.bs.dropdown', function (e) {
		var menu = $(this).find('.dropdown-menu');
		var menuHeight = menu.outerHeight();

		if(menuHeight > 58 && menuHeight < 68) {
			menu.addClass('transformMenu1');
		}
		if(menuHeight > 100 && menuHeight < 110) {
			menu.addClass('transformMenu2');
		}
		if(menuHeight > 140 && menuHeight < 150) {
			menu.addClass('transformMenu3');
		}
		if(menuHeight > 180 && menuHeight < 190) {
			menu.addClass('transformMenu4');
		}
		if(menuHeight > 220 && menuHeight < 230) {
			menu.addClass('transformMenu5');
		}
		if(menuHeight > 250 && menuHeight < 260) {
			menu.addClass('transformMenu6');
		}

	})

	$(document).ready(function () {
		$('.modal').on('show.bs.modal', function (e) {
				if (typeof (e.relatedTarget) != "undefined" && typeof $(e.relatedTarget).attr('href') != "undefined") {
						window.location.hash = $(e.relatedTarget).attr('href');
				} 
		});
	});

	$('#scrollNav').onePageNav();

});
$(function() {	
	$('.accordion .card-header').click(function() {
		var card = 	$(this).parents('.card');
		
		card.find('.collapse').collapse('toggle');
		card.toggleClass('activeCard');
	})
	$('.accordion .card-header').eq(0).click();
})
$(function () {

	$('.breadcrumbs .dropdown--breadcrubs').hover(
		function() {
			$(this).find('.dropdown-menu').addClass('show');
			$(this).find('.btn--breadcrumbs').addClass('active');
		},
		function() {
			$(this).find('.dropdown-menu').removeClass('show');
			$(this).find('.btn--breadcrumbs').removeClass('active');
		});

		$('body').click(function(event) {
			if (!$(event.target).closest($('.breadcrumbs .dropdown--breadcrubs')).length) {
				$('.breadcrumbs .dropdown--breadcrubs .btn--breadcrumbs').removeClass('active');
			}
			if ($(event.target).closest($('.breadcrumbs .dropdown--breadcrubs .dropdown-item')).length) {
				$('.breadcrumbs .dropdown--breadcrubs .btn--breadcrumbs').removeClass('active');
			}
		});
});

$(function() {	
	$('.btn--submit').click(function() {
		var btnLenght = $(this).outerWidth();
		$(this).addClass('btn--submit--active');

		$(this).find('.text').hide();
		$(this).find('.text').css({
			marginLeft: '-200%'
		});
		
		setTimeout(function() {
			$(this).find('.text').show();
		}.bind(this), 900);

		setTimeout(function() {
			$(this).find('.check').css({
				transform: 'translateX('+(btnLenght * 2)+'px)',
			});
		}.bind(this), 950);

		setTimeout(function() {
			$(this).find('.text').css({
				marginLeft: '0'
			});
		}.bind(this), 1000);

		setTimeout(function() {
			$(this).find('.check').css({
				transform: 'translateX(0)',
			});
			$(this).removeClass('btn--submit--active');
		}.bind(this), 1600);
	});
})
$(function () {
$('.btn-number').click(function(e){
  e.preventDefault();
  
  fieldName = $(this).attr('data-field');
  type      = $(this).attr('data-type');
  var input = $("input[name='"+fieldName+"']");
  var currentVal = parseInt(input.val());
  if (!isNaN(currentVal)) {
      if(type == 'minus') {
          
          if(currentVal > input.attr('min')) {
              input.val(currentVal - 1).change();
          } 
          if(parseInt(input.val()) == input.attr('min')) {
              $(this).attr('disabled', true);
          }

      } else if(type == 'plus') {

          if(currentVal < input.attr('max')) {
              input.val(currentVal + 1).change();
          }
          if(parseInt(input.val()) == input.attr('max')) {
              $(this).attr('disabled', true);
          }

      }
  } else {
      input.val(0);
  }
});
$('.input-number').focusin(function(){
 $(this).data('oldValue', $(this).val());
});
$('.input-number').change(function() {
  
  minValue =  parseInt($(this).attr('min'));
  maxValue =  parseInt($(this).attr('max'));
  valueCurrent = parseInt($(this).val());
  
  name = $(this).attr('name');
  if(valueCurrent >= minValue) {
      $(".btn-number[data-type='minus'][data-field='"+name+"']").removeAttr('disabled')
  } else {
      alert('Sorry, the minimum value was reached');
      $(this).val($(this).data('oldValue'));
  }
  if(valueCurrent <= maxValue) {
      $(".btn-number[data-type='plus'][data-field='"+name+"']").removeAttr('disabled')
  } else {
      alert('Sorry, the maximum value was reached');
      $(this).val($(this).data('oldValue'));
  }
  
  
});
$(".input-number").keydown(function (e) {
      // Allow: backspace, delete, tab, escape, enter and .
      if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 190]) !== -1 ||
           // Allow: Ctrl+A
          (e.keyCode == 65 && e.ctrlKey === true) || 
           // Allow: home, end, left, right
          (e.keyCode >= 35 && e.keyCode <= 39)) {
               // let it happen, don't do anything
               return;
      }
      // Ensure that it is a number and stop the keypress
      if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
          e.preventDefault();
      }
  });
})
$(function () {

  var basketOrder = $('.basket__info__order');
  var couponInput = basketOrder.find('.coupon__input');
  var couponSubmit = basketOrder.find('#btnCoupon');
  var couponCorrect = basketOrder.find('.coupon__correct');
  var couponCorrectButton = couponCorrect.find('.coupon__change');

  couponInput.hide();
  couponCorrect.hide();

  basketOrder.find('.coupon__link').click(function(e) {
    e.preventDefault();
    
    $(this).hide();
    couponInput.show();
  });

  couponSubmit.click(function (e) {
    e.preventDefault();

    if(couponInput.find('input').val() === '') {
      couponInput.addClass('coupon__input--error');
    }
    else {
      couponInput.removeClass('coupon__input--error');
      couponInput.hide();
      couponCorrect.show();
    }
  });

  $(couponCorrectButton).click(function (e) { 
    e.preventDefault();
    
    couponCorrect.hide();
    couponInput.show();
  });

});
$(function() {	

	$('.btn__product__preview--info, .btn__product__preview--info .btn').not('.dropdown').click(function() {
		var Ico = $(this).attr('class').search( /btn__product__preview--info/ ) > -1 ? $(this).find('.arrow_ico') : $(this).siblings('.arrow_ico');
		
		if(Ico.attr('class').search( /arrow_ico--active/ ) > -1)
			$('.product_preview__info .btn__product__preview--info .arrow_ico').removeClass('arrow_ico--active');
		else {
			$('.product_preview__info .btn__product__preview--info .arrow_ico').removeClass('arrow_ico--active');
			Ico.addClass('arrow_ico--active');
		}
	});

	$('body').click(function(event) {
		if (!$(event.target).closest($('.btn__product__preview--info')).length) {
			$('.product_preview__info .btn__product__preview--info .arrow_ico').removeClass('arrow_ico--active');
		}
		if ($(event.target).closest($('.dropdown-item')).length) {
			$('.product_preview__info .btn__product__preview--info .arrow_ico').removeClass('arrow_ico--active');
		}
	});


	$('.feedback .select').click(function(e) {
		e.preventDefault();
		var parent = $(this).parent('.dropdown');
		var smText = parent.find('.search_concept');
		
		$(this).find('.arrow_ico').toggleClass('arrow_ico--active');
		
	})
	 $('.feedback .dropdown-menu').find('a').click(function(e) {
		var parent = $(this).parent('.dropdown-menu').parent('.dropdown');

    if (!$(this).hasClass('dropdown-item--check')) {
      var param = $(this).attr("href").replace("#","");
			var concept = $(this).text();
			
			parent.find('.select').addClass('active');

      parent.find('.text').text(concept);
    }
	});  
	
	$('.feedback .dropdown').on('hide.bs.dropdown', function () {
		$(this).find('.arrow_ico').removeClass('arrow_ico--active');
		if($(this).find('.select .text').html() === "" || $(this).find('.select .text').html() === undefined)
			$('.feedback .select').removeClass('active');
	})

});
$(function() {

  var deleteBtn = $('.delete_item');

  $(deleteBtn).click(function (e) { 
    e.preventDefault();
    
    $(this).parents('.col-md-3').fadeOut(function () {
      $(this).remove();    
    });
    
  });

});
$(function () {
  FilePond.registerPlugin(
    // encodes the file as base64 data
    FilePondPluginFileEncode,
    
    // validates files based on input type
    FilePondPluginFileValidateType,
    
    // corrects mobile image orientation
    FilePondPluginImageExifOrientation,
    
    // previews the image
    FilePondPluginImagePreview,
    
    // crops the image to a certain aspect ratio
    FilePondPluginImageCrop,
    
    // resizes the image to fit a certain size
    FilePondPluginImageResize,
    
    // applies crop and resize information on the client
    FilePondPluginImageTransform
  );

  FilePond.create(
    document.querySelector('.usrer_data__photo .filepond'),
    {
      labelIdle: '<svg xmlns="http://www.w3.org/2000/svg" width="36" height="44" viewBox="0 0 36 44"> <g fill="#C1C1C1" fill-rule="nonzero"> <ellipse cx="17.979" cy="10.193" rx="9.863" ry="10.193"/> <path d="M17.98 25.483C8.105 25.483.102 33.754.102 43.958h35.753c0-10.204-8.004-18.475-17.877-18.475z"/> </g> </svg> <p><span class="filepond--label-action">Загрузите</span> вашу фотографию</p> ',
      imagePreviewHeight: 160,
      imageCropAspectRatio: '1:1',
      imageResizeTargetWidth: 160,
      imageResizeTargetHeight: 160
    }
  );

});
$(function () {

	$('.dropdown--new [data-toggle="dropdownCHoose"]').click(function() {

		var thisMenu = $(this).closest('.dropdown--new').find('.dropdown-menu');
		thisMenu.toggle();

		var menu = $(this).closest('.col-md-2').siblings('.col-md-2').find('.dropdown-menu');
		menu.hide();

		$(this).toggleClass('rotatesvg');
		$('.dropdown--new [data-toggle="dropdownCHoose"]').not(this).removeClass('rotatesvg');
		
	})

	$(".dropdown-menu .dropdown-item").click(function(){
	  var selText = $(this).find('span').eq(0).text();
	  $(this).parents('.dropdown, .dropup').find('.dropdown-toggle span b').html(selText+' <span class="caret"></span>');
	});
	
	$(".dropdown-menu").click(function(){
	  $('.dropdown-toggle').not(this).removeClass('rotatesvg');
	});


	var dropDownArr = [];

	for(i = 0; i < $('.dropdown--new').length; i++)
		dropDownArr[i] = [];

	$('.dropdown--new').find('.dropdown-item').click(function() {

		var item = $(this);
		var menu = item.parents('.dropdown--new');
		var index = $('.dropdown--new').index(menu);
		var itemText = item.find('span').first().html();
		var counterField = menu.find('.dropdown-header__left p');
		var itemField = menu.find('.dropdown-header__left span');
		var chooseBtn = menu.find('.dropdown-head .btn');
		var radio = menu.attr('class').indexOf('dropdown--new--radio') > -1 ? true : false;
		var button = menu.find('.btn');

		if(!radio) {
			item.toggleClass('dropdown-item--active');
			if(dropDownArr[index].indexOf(itemText) === -1) {
				dropDownArr[index].push(itemText);
			}
			else {
				if(dropDownArr[index].indexOf(itemText) === 0) {
					dropDownArr[index].splice(dropDownArr[index].indexOf(itemText), 1);
				}
				else{
					dropDownArr[index].splice(dropDownArr[index].indexOf(itemText), 1);
				}
			}

			if(dropDownArr[index].length > 0){
				chooseBtn.html('ОЧИСТИТЬ');
				chooseBtn.addClass('choose');
			}
			else {
				chooseBtn.html('ВЫБРАТЬ ВСЕ');
				chooseBtn.removeClass('choose');
			}
			itemField.html(dropDownArr[index].join(', '));
			counterField.html(dropDownArr[index].length + ' ВЫБРАНО');
			button.find('span b').html(dropDownArr[index].join(', '));
			if(button.find('span b').html() === '')
				button.find('span b').html(menu.find('[data-text]').data('text'));
		}
		if(radio) {
			menu.find('.dropdown-item').removeClass('dropdown-item--active');
			item.addClass('dropdown-item--active');
			dropDownArr[index].splice(0, dropDownArr[index].length);
			dropDownArr[index].push(itemText);
			button.find('span b').html(itemText);
			if(button.find('span b').html() === '')
				button.find('span b').html(menu.find('[data-text]').data('text'));
		}
	});

	// инициализация первой
	$('.dropdown--new [data-target="80x200"]').click();
	$('.dropdown--new [data-target="Популярные"]').click();

	$('.dropdown--new .dropdown-head .btn').click(function() {

		var item = $(this);
		var menu = item.parents('.dropdown--new');
		var index = $('.dropdown--new').index(menu);
		var counterField = menu.find('.dropdown-header__left p');
		var menuItems = menu.find('.dropdown-item');
		var itemField = menu.find('.dropdown-header__left span');
		var button = menu.find('.btn');

		item.toggleClass('choose');

		if(item.attr('class').indexOf('choose') > -1) {
			menuItems.map(function(count, item) {
				$(item).addClass('dropdown-item--active');
				if(dropDownArr[index].indexOf($(item).find('span').first().html()) === -1) {
					dropDownArr[index].push($(item).find('span').first().html());
				}
			});
			item.html('ОЧИСТИТЬ');
		}
		else {
			menuItems.map(function(count, item) {
				$(item).removeClass('dropdown-item--active');
			});
			dropDownArr[index].splice(0, dropDownArr[index].length);
			item.html('ВЫБРАТЬ ВСЕ');
		}

		itemField.html(dropDownArr[index].join(', '));
		counterField.html(dropDownArr[index].length + ' ВЫБРАНО');
		button.find('span b').html(itemField.html());
		if(button.find('span b').html() === '')
			button.find('span b').html(menu.find('[data-text]').data('text'));
	});



	if($("#ex2").is("#ex2")) {
		var price = $("#ex2").slider().on('slide', priceRange).data('slider');
		$(price.element).on('click change',priceRange);
	}
	function priceRange() {
		var menu = $(price.element).parents('.dropdown--new');
		var smallPrice = menu.find('.dropdown-header__left span');
		var min = menu.find('.drowdown__range__block span').first();
		var max = menu.find('.drowdown__range__block span').last();
		var btnText = $(price.element).parents('.dropdown--new').find('.btn span b');

		var priceStr = price.getValue()[0]+' ₽'+' \t - \t '+price.getValue()[1]+' ₽';

		btnText.html(priceStr);

		min.html(price.getValue()[0]+' ₽');
		max.html(price.getValue()[1]+' ₽');
		smallPrice.html(price.getValue()[0]+' ₽ - '+price.getValue()[1]+' ₽');
	}

	$('.dropdown-toggle').click(function() {
		$(this).toggleClass('rotatesvg');
		$('.dropdown-toggle').not(this).removeClass('rotatesvg');

	});

	$('.dropdown-menu .dropdown-item ').click(function() {
		$(this).parents('.dropdown').find('.dropdown-toggle').removeClass('rotatesvg');
		$('.dropdown-toggle').removeClass('rotatesvg');
		
	})

	$(document).on('click', function(e) {
		  if (!$(e.target).closest(".dropdown-toggle").length) {
		    $('.dropdown-toggle').removeClass('rotatesvg');
		  }

		   if (!$(e.target).closest(".dropdown--new").length) {
		    $('.dropdown--new .dropdown-menu').hide();
		    $('.dropdown--new [data-toggle="dropdownCHoose"]').removeClass('rotatesvg');
		  }

		  if (!$(e.target).closest("#videoModal iframe").length) {
		     $("iframe").each(function() {
		      $(this)[0].contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}', '*')});
		  }
		  e.stopPropagation();
	});


	$('.chose_toggler__block').click(function() {
		var block = $(this).parents('.chose_toggler');

		block.find('.chose_toggler__block').removeClass('chose_toggler__block--active');
		$(this).addClass('chose_toggler__block--active');
	})

});
$(function(){

	var headerHeight = $('header').outerHeight();
	var breadHeight = $('.breadcrumbs').outerHeight();
	var previewHeight = $('.product_preview').outerHeight();
	var h_hght = headerHeight + breadHeight + previewHeight; // высота шапки
	var h_mrg = 0;    // отступ когда шапка уже не видна
  var elem = $('.product_menu');
  var top = $(this).scrollTop();
   
  if(top > h_hght) {
    elem.css({
    	top: h_mrg,
    	position: 'fixed'
    });
  }           
   
  $(window).scroll(function() {
		top = $(this).scrollTop();
			
		if (top+h_mrg < h_hght) {
			elem.addClass('menu--active');
			$('.product_about').css({
				paddingTop: "44px"
			});
			elem.css({
				top: (h_hght-top),
				position: 'static',
			});
		} else {
			$('.product_about').css({
				paddingTop: "110px"
			});
			elem.removeClass('menu--active');
			elem.css({
				top: h_mrg,
				position: 'fixed'
			});
		}
	});
		
	$(".block_anchors").stick_in_parent();

	$(".user__info").stick_in_parent();

	if($(".basket__info__right").is(".basket__info__right")) {
		$(".basket__info__right").stick_in_parent()
		.on("sticky_kit:bottom", function(e) {
			$(".basket__info__right").addClass('bottom');
			$(".basket__info__right").css({
				left: 'auto',
				right: '8px'
			})
		})
		.on("sticky_kit:unbottom", function(e) {
			$(".basket__info__right").removeClass('bottom');
		})

		var rightInfo = $('.basket__info__left').outerWidth() + $(".basket__info__left").offset().left + 16;
		
		$(window).resize(function() {
			rightInfo = $('.basket__info__left').outerWidth() + $(".basket__info__left").offset().left + 16;
		})
		$(window).scroll(function(){
			if($(".basket__info__right").attr('class').search( /is_stuck/ ) > -1 && $(".basket__info__right").attr('class').search( /bottom/ ) === -1) {
				$(".basket__info__right").css({
					left: rightInfo+'px'
				})
			}
		});
		$(window).resize(function(){
			if($(".basket__info__right").attr('class').search( /is_stuck/ ) > -1 && $(".basket__info__right").attr('class').search( /bottom/ ) === -1) {
				$(".basket__info__right").css({
					left: rightInfo+'px'
				})
			}
		});
	}

});
$(function () {

	$('.modal_oneclick form input').attr('placeholder', '');
	$('.modal_oneclick form label').on('click change keyup', function() {
		$(this).addClass('input--active');
	});

	$('.modal_oneclick form label input').map(function() {
		if($(this).val() == '')
			$(this).parent('label').removeClass('input--active');
		else
			$(this).parent('label').addClass('input--active');
	})
	$('body').on('click keyup blur', function(event) {
		$('.modal_oneclick form label input').map(function() {
			var self = this;
			if (!$(event.target).closest($(self)).length) {
					if($(self).val() == '')
						$(self).parent('label').removeClass('input--active');
				}
			})
  });
  
	$('.user_data  input').attr('placeholder', '');
	$('.user_data  label').on('click change keyup', function() {
		$(this).addClass('input--active');
	});

	$('.user_data  label input').map(function() {
		if($(this).val() == '')
			$(this).parent('label').removeClass('input--active');
		else
			$(this).parent('label').addClass('input--active');
	})
	$('body').on('click keyup blur', function(event) {
		$('.user_data  label input').map(function() {
			var self = this;
			if (!$(event.target).closest($(self)).length) {
					if($(self).val() == '')
						$(self).parent('label').removeClass('input--active');
				}
			})
	});

	
	$('.order_form__left  input').attr('placeholder', '');
	$('.order  label').on('click change keyup', function() {
		$(this).addClass('input--active');
	});

	$('.order  label input').map(function() {
		if($(this).val() == '')
			$(this).parent('label').removeClass('input--active');
		else
			$(this).parent('label').addClass('input--active');
	})
	$('body').on('click keyup blur', function(event) {
		$('.order  label input').map(function() {
			var self = this;
			if (!$(event.target).closest($(self)).length) {
					if($(self).val() == '')
						$(self).parent('label').removeClass('input--active');
				}
			})
	});
	

	var climb = $('#climbBlock');
	var lift = $('#liftBlock');
	lift.hide();

	climb.find('#climbInput').change(function (e) {
		e.preventDefault();

		lift.toggle();
	})
})
$(function () {
	
	if($('#map').is('#map')) {
		image = 'img/map-pin.svg';

		var locationArr = [
			{
				lat: 54.723416,
				lon: 20.487770,
				icon: image,
				title:  [
					'<p>ул.Мусорского, 10 <br> ТЦ «Мега Дом» <br> 1 этаж</p>'
				].join(''),
				html: [
					'<p class="text--title">ул.Мусорского, 110 <br>  ТЦ «Мега Дом» <br> 1 этаж</p>',
					'<p class="text--metro">Название метро</p>',
					'<p>8 (963) 737 38 90</p>',
					'<p>Пн-Вс: с 10.00 до 20.00</p>',
				].join(''),
			},
			{
				lat: 54.720865,
				lon: 20.509371,
				icon: image,
				title:  [
					'<p>Московский проспект, 255 <br> ТЦ «Гиант» <br> 2 этаж</p>'
				].join(''),
				html: [
					'<p class="text--title">Московский проспект, 255 <br> ТЦ «Гиант» <br> 2 этаж</p>',
					'<p class="text--metro">Название метро</p>',
					'<p>8 (963) 737 38 90</p>',
					'<p>Пн-Вс: с 10.00 до 20.00</p>',
				].join(''),
			},
			{
				lat: 54.715648,
				lon: 20.504316,
				icon: image,
				title:  [
					'<p>Советский проспект, 125 <br> ТЦ «Балтламинат» <br> 2 этаж</p>'
				].join(''),
				html: [
					'<p class="text--title">Советский проспект, 125 <br> ТЦ «Балтламинат» <br> 2 этаж</p>',
					'<p class="text--metro">Название метро</p>',
					'<p>8 (963) 737 38 90</p>',
					'<p>Пн-Вс: с 10.00 до 20.00</p>',
				].join(''),
			},
			{
				lat: 54.719891,
				lon: 20.497836,
				icon: image,
				title:  [
					'<p>ул. Нарвская, 112 <br> ТЦ «Балтийская галерея» <br> 5 этаж</p>'
				].join(''),
				html: [
					'<p class="text--title">ул. Нарвская, 112 <br> ТЦ «Балтийская галерея» <br> 5 этаж</p>',
					'<p class="text--metro">Название метро</p>',
					'<p>8 (963) 737 38 90</p>',
					'<p>Пн-Вс: с 10.00 до 20.00</p>',
				].join(''),
			},
			{
				lat: 54.724911,
				lon: 20.499394,
				icon: image,
				title:  [
					'<p>ул. Нарвская, 212 <br> ТЦ «Балтийская галерея» <br> 5 этаж</p>'
				].join(''),
				html: [
					'<p class="text--title">ул. Нарвская, 212 <br> ТЦ «Балтийская галерея» <br> 5 этаж</p>',
					'<p class="text--metro">Название метро</p>',
					'<p>8 (963) 737 38 90</p>',
					'<p>Пн-Вс: с 10.00 до 20.00</p>',
				].join(''),
			},
			{
				lat: 54.724911,
				lon: 20.499394,
				icon: image,
				title:  [
					'<p>ул. Нарвская, 212 <br> ТЦ «Балтийская галерея» <br> 5 этаж</p>'
				].join(''),
				html: [
					'<p class="text--title">ул. Нарвская, 212 <br> ТЦ «Балтийская галерея» <br> 5 этаж</p>',
					'<p class="text--metro">Название метро</p>',
					'<p>8 (963) 737 38 90</p>',
					'<p>Пн-Вс: с 10.00 до 20.00</p>',
				].join(''),
			},
			{
				lat: 54.724911,
				lon: 20.499394,
				icon: image,
				title:  [
					'<p>ул. Нарвская, 212 <br> ТЦ «Балтийская галерея» <br> 5 этаж</p>'
				].join(''),
				html: [
					'<p class="text--title">ул. Нарвская, 212 <br> ТЦ «Балтийская галерея» <br> 5 этаж</p>',
					'<p class="text--metro">Название метро</p>',
					'<p>8 (963) 737 38 90</p>',
					'<p>Пн-Вс: с 10.00 до 20.00</p>',
				].join(''),
			},
			{
				lat: 54.724911,
				lon: 20.499394,
				icon: image,
				title:  [
					'<p>ул. Нарвская, 212 <br> ТЦ «Балтийская галерея» <br> 5 этаж</p>'
				].join(''),
				html: [
					'<p class="text--title">ул. Нарвская, 212 <br> ТЦ «Балтийская галерея» <br> 5 этаж</p>',
					'<p class="text--metro">Название метро</p>',
					'<p>8 (963) 737 38 90</p>',
					'<p>Пн-Вс: с 10.00 до 20.00</p>',
				].join(''),
			},
		];
		
		new Maplace({
			locations: locationArr,
			map_div: '#map',
			controls_div: '#salons__places',
			controls_type: 'list',
			controls_on_map: false,
			map_options: {
				disableDefaultUI: $(window).outerWidth() < 370 ? true : false,
				mapTypeControlOptions: {
						position: $(window).outerWidth() < 650 ?  google.maps.ControlPosition.LEFT_BOTTOM : google.maps.ControlPosition.TOP_LEFT,
				},
			},
			afterCloseInfowindow: function () {
				setTimeout(function() {
					$('.gmnoprint').attr('title', '');
				},500);
			},
			afterOpenInfowindow: function () {
				setTimeout(function() {
					$('.gmnoprint').attr('title', '');
				},500);
			},
		}).Load();
	}

	$('.salons .ullist a').attr('title', '');
	$('.salons .gmnoprint').attr('title', '');

	setTimeout(function() {
		$('.gmnoprint').attr('title', '');
	},2000);

	$('.salons').click(function () {
		setTimeout(function() {
			$('.gmnoprint').attr('title', '');
		},300);
		setTimeout(function() {
			$('.gmnoprint').attr('title', '');
		},800);
	})

})
$(function () {

	if($('[id="phone"]').is('[id="phone"]'))
		$('[id="phone"]').mask('+7 (000) 000-00-00');

		$('.modal_oneclick form .btn').click(function(e) {
			e.preventDefault();
			var email = $(this).parents('.modal_oneclick').find('#email');
			var phone = $(this).parents('.modal_oneclick').find('#phone');
			var labelEmail = email.parents('label');
			var labelPhone = phone.parents('label');
			var textEmail = email.val();
			var textPhone = phone.val();
			var bodyLeft = $(this).parents('.modal-body__left');
			var bodyRight = $(this).parents('.modal-body').find('.modal_review__thanks');

			if(textPhone === '') {
				labelPhone.addClass('error');
			}
			else labelPhone.removeClass('error');

			if(textEmail.search(/^[a-zA-Z0-9].{1,}@[a-zA-z]{3,}.[a-zA-z]{2,}$/i)) {
				labelEmail.addClass('error');
			}
			else labelEmail.removeClass('error');

			if(textPhone !== '' && !textEmail.search(/^[a-zA-Z0-9].{1,}@[a-zA-z]{3,}.[a-zA-z]{2,}$/i) && $(this).parents('.slideModal').length > 0) {
				bodyLeft.slideUp(function() {
					bodyRight.slideDown();
				});
			}
		})

		$('.user_data__block--btn .btn--blue').click(function(e) {
			e.preventDefault();
			var email = $(this).parents('.user_data__left').find('#email');
			
			var label = email.parents('label');
			var text = email.val();
			
			if(text.search(/^[a-zA-Z].{1,}@[a-zA-z]{3,}.[a-zA-z]{2,}$/i)) {
				label.addClass('error');
			}
			else label.removeClass('error');
		})

})
$(function () {

  $("#menuBtn").click(function (e) {
    e.preventDefault();
    
    var menu = $('#menuModal');

    var menuMargin = $('.header__bottom').offset().top - $(window).scrollTop() + 55;

    $('#partnersModal').modal('hide');
    $('#buyersModal').modal('hide');

    setTimeout(function () {
      $('.modal-backdrop').css({
        top: (menuMargin - 5)+'px'
      });
      menu.find('.modal-dialog').css({
        marginTop: menuMargin+'px'
      })

      $('#menuModal .menu__list li').eq(0).find('a').mouseover();

    },100);

  });

  $("#buyersBtn").click(
    function (e) {

      e.preventDefault();
      clearTimeout(window.closeModal1);
      clearTimeout(window.closeModal2);

      var menu = $('#buyersModal');
      var modalMenu = menu.find('.modal__menu');

      menu.modal('show');
      $('#menuModal').modal('hide');
      $('#partnersModal').modal('hide');

      modalMenu.css({
        width: menu.find('.modal-body').outerWidth(),
      });

      var menuMargin = $('.header__bottom').offset().top - $(window).scrollTop() + 55;

      var mLeft = $(this).offset().left;

      $(this).addClass('active');

      setTimeout(function () {
        $('.modal-backdrop').css({
          top: (menuMargin - 5)+'px'
        });
        menu.find('.modal-dialog').css({
          marginTop: menuMargin+'px',
          paddingTop: "2px",
          left: mLeft+'px'
        })

      },100);
    }
);


$("#partnersBtn").click(
  function (e) {

    e.preventDefault();
    clearTimeout(window.closeModal3);
    clearTimeout(window.closeModal4);

    var menu = $('#partnersModal');

    var menuMargin = $('.header__bottom').offset().top - $(window).scrollTop() + 55;

    menu.modal('show');
    $('#menuModal').modal('hide');
    $('#buyersModal').modal('hide');

    var mLeft = $("header nav").offset().left;

    $(this).addClass('active');

    setTimeout(function () {
      $('.modal-backdrop').css({
        top: (menuMargin - 5)+'px'
      });
      menu.find('.modal-dialog').css({
        marginTop: menuMargin+'px',
        paddingTop: "2px",
        left: (mLeft - 10)+'px'
      })

    },100);
  },
);



  $('#menuModal').on('hide.bs.modal', function (e) {
    $(".hamburger--slider").removeClass('is-active');
  });

  $('#buyersModal').on('hide.bs.modal', function (e) {
    $("#buyersBtn").removeClass('active');
  });
  $('#partnersModal').on('hide.bs.modal', function (e) {
    $("#partnersBtn").removeClass('active');
  });
  
  $('#menuModal .menu__list a').hover(
    function(e) {
      e.preventDefault();

      var target = '#'+$(this).data('target');

      if(target !== "#undefined") {
        $('#menuModal .menu__content').fadeIn();
        $('#menuModal .menu__list a').removeClass('active');
        $(this).addClass('active');

        $('#menuModal .menu__content .menu__block').removeClass('active');
        $('#menuModal .menu__content').find(target).addClass('active');
      }
      else {
        $('#menuModal .menu__list a').removeClass('active');
        $('#menuModal .menu__content').fadeOut();
      }
    },
    function(e) {
      e.preventDefault();
    }

  )


  $('#cityModal').on('show.bs.modal', function (e) {
    $('#searchModal').modal('hide');
    $('#menuModal').modal('hide');
  });

  $('#galleryModal').on('show.bs.modal', function (e) {
    $('#searchModal').modal('hide');
  });

  /*! Pushy - v1.1.0 - 2017-1-30
* Pushy is a responsive off-canvas navigation menu using CSS transforms & transitions.
* https://github.com/christophery/pushy/
* by Christopher Yee */

(function ($) {
  var pushy = $('.pushy'), //menu css class
    body = $('body'),
    container = $('#container'), //container css class
    push = $('.push'), //css class to add pushy capability
    pushyLeft = 'pushy-left', //css class for left menu position
    pushyOpenLeft = 'pushy-open-left', //css class when menu is open (left position)
    pushyOpenRight = 'pushy-open-right', //css class when menu is open (right position)
    siteOverlay = $('.site-overlay'), //site overlay
    menuBtn = $('.menu-btn, .pushy-link'), //css classes to toggle the menu
    menuBtnFocus = $('.menu-btn'), //css class to focus when menu is closed w/ esc key
    menuLinkFocus = $(pushy.data('focus')), //focus on link when menu is open
    menuSpeed = 200, //jQuery fallback menu speed
    menuWidth = pushy.width() + 'px', //jQuery fallback menu width
    submenuClass = '.pushy-submenu',
    submenuOpenClass = 'pushy-submenu-open',
    submenuClosedClass = 'pushy-submenu-closed',
    submenu = $(submenuClass);

  //close menu w/ esc key
  $(document).keyup(function(e) {
    //check if esc key is pressed
    if (e.keyCode == 27) {

      //check if menu is open
      if( body.hasClass(pushyOpenLeft) || body.hasClass(pushyOpenRight) ){
        if(cssTransforms3d){
          closePushy(); //close pushy
        }else{
          closePushyFallback();
          opened = false; //set menu state
        }
        
        //focus on menu button after menu is closed
        if(menuBtnFocus){
          menuBtnFocus.focus();
        }
        
      }

    }   
  });

  function togglePushy(){
    //add class to body based on menu position
    if( pushy.hasClass(pushyLeft) ){
      body.toggleClass(pushyOpenLeft);
    }else{
      body.toggleClass(pushyOpenRight);
    }

    //focus on link in menu after css transition ends
    if(menuLinkFocus){
      pushy.one('transitionend', function() {
        menuLinkFocus.focus();
      });
    }
    
  }

  function closePushy(){
    if( pushy.hasClass(pushyLeft) ){
      body.removeClass(pushyOpenLeft);
    }else{
      body.removeClass(pushyOpenRight);
    }
  }

  function openPushyFallback(){
    //animate menu position based on CSS class
    if( pushy.hasClass(pushyLeft) ){
      body.addClass(pushyOpenLeft);
      pushy.animate({left: "0px"}, menuSpeed);
      container.animate({left: menuWidth}, menuSpeed);
      //css class to add pushy capability
      push.animate({left: menuWidth}, menuSpeed);
    }else{
      body.addClass(pushyOpenRight);
      pushy.animate({right: '0px'}, menuSpeed);
      container.animate({right: menuWidth}, menuSpeed);
      push.animate({right: menuWidth}, menuSpeed);
    }

    //focus on link in menu
    if(menuLinkFocus){
      menuLinkFocus.focus();
    }
  }

  function closePushyFallback(){
    //animate menu position based on CSS class
    if( pushy.hasClass(pushyLeft) ){
      body.removeClass(pushyOpenLeft);
      pushy.animate({left: "-" + menuWidth}, menuSpeed);
      container.animate({left: "0px"}, menuSpeed);
      //css class to add pushy capability
      push.animate({left: "0px"}, menuSpeed);
    }else{
      body.removeClass(pushyOpenRight);
      pushy.animate({right: "-" + menuWidth}, menuSpeed);
      container.animate({right: "0px"}, menuSpeed);
      push.animate({right: "0px"}, menuSpeed);
    }
  }

  function toggleSubmenu(){
    //hide submenu by default
    $(submenuClass).addClass(submenuClosedClass);

    $(submenuClass).on('click', function(){
          var selected = $(this);

          if( selected.hasClass(submenuClosedClass) ) {
              //hide opened submenus
              $(submenuClass).addClass(submenuClosedClass).removeClass(submenuOpenClass);
              //show submenu
              selected.removeClass(submenuClosedClass).addClass(submenuOpenClass);
          }else{
              //hide submenu
              selected.addClass(submenuClosedClass).removeClass(submenuOpenClass);
          }
      });
  }

  //Pushy
  $(function () {
    //checks if 3d transforms are supported removing the modernizr dependency
    var cssTransforms3d = (function csstransforms3d(){
      var el = document.createElement('p'),
      supported = false,
      transforms = {
          'webkitTransform':'-webkit-transform',
          'OTransform':'-o-transform',
          'msTransform':'-ms-transform',
          'MozTransform':'-moz-transform',
          'transform':'transform'
      };

      if(document.body !== null) {
        // Add it to the body to get the computed style
        document.body.insertBefore(el, null);

        for(var t in transforms){
            if( el.style[t] !== undefined ){
                el.style[t] = 'translate3d(1px,1px,1px)';
                supported = window.getComputedStyle(el).getPropertyValue(transforms[t]);
            }
        }

        document.body.removeChild(el);

        return (supported !== undefined && supported.length > 0 && supported !== "none");
      }else{
        return false;
      }
    })();

    if(cssTransforms3d){
      //toggle submenu
      toggleSubmenu();

      //toggle menu
      menuBtn.on('click', function(){
        togglePushy();
      });
      //close menu when clicking site overlay
      siteOverlay.on('click', function(){
        togglePushy();
      });
    }else{
      //add css class to body
      body.addClass('no-csstransforms3d');

      //hide menu by default
      if( pushy.hasClass(pushyLeft) ){
        pushy.css({left: "-" + menuWidth});
      }else{
        pushy.css({right: "-" + menuWidth});
      }

      //fixes IE scrollbar issue
      container.css({"overflow-x": "hidden"});

      //keep track of menu state (open/close)
      var opened = false;

      //toggle submenu
      toggleSubmenu();

      //toggle menu
      menuBtn.on('click', function(){
        if (opened) {
          closePushyFallback();
          opened = false;
        } else {
          openPushyFallback();
          opened = true;
        }
      });

      //close menu when clicking site overlay
      siteOverlay.on('click', function(){
        if (opened) {
          closePushyFallback();
          opened = false;
        } else {
          openPushyFallback();
          opened = true;
        }
      });
    }
  })
    

}(jQuery));

});
$(function () {

	function doScrollbar(selector, maxLength) {
		if($(selector).is(selector)) {
			var ps = new PerfectScrollbar(selector, {
				maxScrollbarLength: 280,
				wheelPropagation: true,
			});		
			$('.ps__rail-y').css('z-index', '100');
			ps.update();
		}
	}
	
	setTimeout(function() {
		doScrollbar('.modal__cloth .modal-body__right', 280);
		doScrollbar('.ullist', 280);
		doScrollbar('.city_middle', 250);
		
		if($('.dropdown-menu').is('.dropdown-menu')) {
			$('.dropdown-menu').map(function(index, item) {
				doScrollbar(item, 280);
			});
		}
		// if($('#searchModal').is('#searchModal')) {
		// 	$('#searchModal .modal-body').map(function(index, item) {
		// 		doScrollbar(item, 50);
		// 	});
		// }

		if($('.order_form__stuff ').is('.order_form__stuff ') && $('.order_form__stuff ').outerHeight() > 399) {
			var ps = new PerfectScrollbar('.order_form__stuff', {
				maxScrollbarLength: 150,
				wheelPropagation: true,
			});		
			$('.ps__rail-y').css('z-index', '100');
			
			$('.order_form__stuff ').scroll(function() {

				if( $('.order_form__stuff ').outerHeight() > 399 ) {
					ps.update();
				}
				else {
					ps.destroy();
				}
			})

			$('.order_form__stuff .remove').click(function(e) {
				e.preventDefault();
				$(this).parents('.order_form__stuff').animate({scrollTop:$(this).parents('.order_form__stuff').offset().top}, 500);
				
				$(this).parents('.stuff__block').remove();

				if( $('.order_form__stuff ').outerHeight() > 399 ) {
					ps.update();
				}
				else {
					ps.destroy();
				}
			})
		}
	},500);
});
$(function () {

  // $('#searchModal').modal('show');
  
  var search = $('#searchInput');

  search.on('change input', function () { 

    var self = $(this);

    if(self.val() !== '') {
      $('#searchModal').modal({
        focus: false
      })

      var searchMargin = $('.header_top').offset().top - $(window).scrollTop() + 55;
      var backdropMargin = $('.header__bottom').offset().top - $(window).scrollTop() + 55;
      
      self.parents('.header__search').css({
        position: 'relative',
        zIndex: '100'
      })
      
      var inputTop = self.outerHeight() + self.offset().top;
      var inputRight = self.offset().right;
      var inputLeft = self.offset().left;

      setTimeout(function() {

        var headerHeight = $('header ').outerHeight();

        $('.modal-backdrop').css({
          top: (backdropMargin - 5)+'px'
        })
        $('#searchModal').find('.modal-dialog').css({
          top: (searchMargin - 10)+'px'
        })

        $('#searchModal .modal__search').css({
          width: (self.outerWidth())+'px',
          marginLeft: (inputLeft)+'px'
        })
         if ($(window).width() < 1201) {
          $('#searchModal .modal__search').css({
            width: (self.outerWidth())+'px',
            marginLeft: (inputLeft - 208)+'px'
          })
         }

        if ($(window).width() < 992) {
          $('#searchModal .modal__search').css({
            width: (self.outerWidth())+'px',
            marginLeft: (inputLeft - 34)+'px',
            marginTop: 20+'px'
          })
        }

        self.focus();

      },100);
    }
    else {
      $('#searchModal').modal('hide');
      
      self.parents('.header__search').css({
        position: 'relative',
        zIndex: '1'
      })
    }
  })
  $('#searchModal').on('hidden.bs.modal', function (e) {
    $(this).parents('.header__search').css({
      position: 'relative',
      zIndex: '1'
    })
    if ($(window).width() < 769) {
      $('.header__search').css('display', 'none');
    }   
  })


  $('.header__block--search-mobile').on('click' , function () {
    $('.header__search').toggle();
    if($('.header__search').css('display') === 'block') {
      $(this).find('path').css('fill', '#555d64')
    } else {
      $(this).find('path').css('fill', '#aaaaaa')
    }
  })

})
$(function() {	
  
	var counter = 0;
	$('#btnGallery').click(function() {
		if(counter === 0) {
			$('#galleryModal').modal('show');
			setTimeout(function() {
				$('.modal__gallery__right').slick({
				  slidesToShow: 1,
				  slidesToScroll: 1,
				  rows: 0,
					arrows: true,
					accessibility: true,
				  fade: true,
					asNavFor: '.modal__gallery__left',
					prevArrow: '<a href="#/" class="arrow arrow-prev"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="27" viewBox="0 0 15 27"> <path fill="#FFF" fill-rule="evenodd" stroke="#FFF" d="M1.19 13.944l11.7 11.875c.118.112.28.181.46.181.36 0 .65-.281.65-.625a.61.61 0 0 0-.19-.444L2.545 13.5 13.81 2.069a.61.61 0 0 0 .19-.444.638.638 0 0 0-.65-.625.662.662 0 0 0-.46.181L1.19 13.056a.61.61 0 0 0 0 .888"/> </svg></a>',
				  nextArrow: '<a href="#/" class="arrow arrow-next"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="27" viewBox="0 0 14 27"> <path fill="#FFF" fill-rule="evenodd" stroke="#FFF" d="M12.817 13.056L1.567 1.181a.626.626 0 0 0-.884.888L11.514 13.5.684 24.931a.626.626 0 0 0 .884.888l11.249-11.875A.622.622 0 0 0 13 13.5a.622.622 0 0 0-.183-.444"/> </svg></a>',
				  });

				$('.modal__gallery__left').slick({
				  slidesToShow: 1,
				  slidesToScroll: 1,
					accessibility: true,
			    rows: 0,
				  asNavFor: '.modal__gallery__right',
				  dots: false,
				  arrows: false,
				  infinite: false,
				  focusOnSelect: true,
				});
				$('.modal__gallery__left .slick-list').css({
						overflowY: 'overlay'
				});
				if($('.modal__gallery .slick-list').is('.modal__gallery .slick-list')) {
					var ps = new PerfectScrollbar('.modal__gallery .slick-list', {
						maxScrollbarLength: 280,
						wheelPropagation: true,
					});		
					$('.ps__rail-y').css('z-index', '100');
				}
				$('.modal__gallery__right').find('.arrow').focus();
			},500);
		}
		counter = 1;
		$('.modal__gallery__right').on('afterChange', function(event, slick, direction){
			$('.modal__gallery__left .slick-slide').removeClass('slick-current');
			$('.modal__gallery__left .slick-slide').eq(direction).addClass('slick-current');
			$('.modal__gallery__right').find('.arrow').focus();
		});
	})
	if($('#galleryModal').is('#galleryModal')) {
		$('#galleryModal').click(function() {
			$('.modal__gallery__right').find('.arrow').focus();
		})
	}

	$('.products_list__bottom .row').slick({
	  infinite: false,
	  slidesToShow: 4,
	  arrows: true,
    rows: 0,
	  slidesToScroll: 1,
		responsive: [
			{
				breakpoint: 992,
				settings: {
					slidesToShow: 3,
				}
			},
			{
				breakpoint: 768,
				settings: {
					slidesToShow: 2,
				}
			},
			{
				breakpoint: 430,
				settings: {
					slidesToShow: 1,
				}
			},
		],
	  nextArrow: '<a href="#/" class="arrow arrow-next"><svg xmlns="http://www.w3.org/2000/svg" width="7" height="12" viewBox="0 0 7 12"><path fill="#89939B" fill-rule="evenodd" stroke="#89939B" d="M1.427 1.072A.25.25 0 0 0 1 1.25c0 .07.028.132.073.177L5.406 6l-4.333 4.572a.25.25 0 0 0 .353.355l4.5-4.75A.249.249 0 0 0 6 6a.249.249 0 0 0-.073-.177l-4.5-4.75z"/></svg></a>',
	  prevArrow: '<a href="#/" class="arrow arrow-prev arrow--inactive"><svg xmlns="http://www.w3.org/2000/svg" width="7" height="12" viewBox="0 0 7 12"><path fill="#89939B" fill-rule="evenodd" stroke="#89939B" d="M1.073 6.177l4.5 4.75A.25.25 0 0 0 6 10.75a.249.249 0 0 0-.073-.177L1.594 6l4.333-4.572a.25.25 0 0 0-.354-.355l-4.5 4.75A.249.249 0 0 0 1 6c0 .07.028.133.073.177"/></svg></a>'
	});

	$('.basket .product__basket .row').slick({
	  infinite: false,
	  slidesToShow: 4,
	  arrows: true,
    rows: 0,
	  slidesToScroll: 1,
		responsive: [
			{
				breakpoint: 992,
				settings: {
					slidesToShow: 3,
				}
			},
			{
				breakpoint: 768,
				settings: {
					slidesToShow: 2,
				}
			},
			{
				breakpoint: 430,
				settings: {
					slidesToShow: 1,
				}
			},
		],
	  nextArrow: '<a href="#/" class="arrow arrow-next"><svg xmlns="http://www.w3.org/2000/svg" width="7" height="12" viewBox="0 0 7 12"><path fill="#89939B" fill-rule="evenodd" stroke="#89939B" d="M1.427 1.072A.25.25 0 0 0 1 1.25c0 .07.028.132.073.177L5.406 6l-4.333 4.572a.25.25 0 0 0 .353.355l4.5-4.75A.249.249 0 0 0 6 6a.249.249 0 0 0-.073-.177l-4.5-4.75z"/></svg></a>',
	  prevArrow: '<a href="#/" class="arrow arrow-prev arrow--inactive"><svg xmlns="http://www.w3.org/2000/svg" width="7" height="12" viewBox="0 0 7 12"><path fill="#89939B" fill-rule="evenodd" stroke="#89939B" d="M1.073 6.177l4.5 4.75A.25.25 0 0 0 6 10.75a.249.249 0 0 0-.073-.177L1.594 6l4.333-4.572a.25.25 0 0 0-.354-.355l-4.5 4.75A.249.249 0 0 0 1 6c0 .07.028.133.073.177"/></svg></a>'
	});

	$('.products_list__offer .row').slick({
	  infinite: false,
	  slidesToShow: 3,
	  arrows: true,
    rows: 0,
	  slidesToScroll: 1,
		responsive: [
			{
				breakpoint: 768,
				settings: {
					slidesToShow: 2,
				}
			},
			{
				breakpoint: 500,
				settings: {
					slidesToShow: 1,
				}
			},
		],
	  nextArrow: '<a href="#/" class="arrow arrow-next"><svg xmlns="http://www.w3.org/2000/svg" width="7" height="12" viewBox="0 0 7 12"><path fill="#89939B" fill-rule="evenodd" stroke="#89939B" d="M1.427 1.072A.25.25 0 0 0 1 1.25c0 .07.028.132.073.177L5.406 6l-4.333 4.572a.25.25 0 0 0 .353.355l4.5-4.75A.249.249 0 0 0 6 6a.249.249 0 0 0-.073-.177l-4.5-4.75z"/></svg></a>',
	  prevArrow: '<a href="#/" class="arrow arrow-prev arrow--inactive"><svg xmlns="http://www.w3.org/2000/svg" width="7" height="12" viewBox="0 0 7 12"><path fill="#89939B" fill-rule="evenodd" stroke="#89939B" d="M1.073 6.177l4.5 4.75A.25.25 0 0 0 6 10.75a.249.249 0 0 0-.073-.177L1.594 6l4.333-4.572a.25.25 0 0 0-.354-.355l-4.5 4.75A.249.249 0 0 0 1 6c0 .07.028.133.073.177"/></svg></a>'
	});
	
	$('.products_list').on('afterChange', function(){
		$('.products_list').find('.arrow').removeClass('arrow--inactive');
		$('.products_list').find('.slick-disabled').addClass('arrow--inactive');
	});

	
	if($('#homeSlider').is('#homeSlider')) {
		
		$('#homeSlider').slick({
			infinite: true,
			slidesToShow: 1,
			arrows: true,
			dots: true,
			rows: 0,
			slidesToScroll: 1,
			nextArrow: '<a href="#/" class="arrow arrow-next"><svg xmlns="http://www.w3.org/2000/svg" width="11" height="20" viewBox="0 0 11 20"> <path fill="#FFF" fill-rule="evenodd" stroke="#FFF" d="M9.868 9.68l-8.1-8.55A.45.45 0 0 0 1 1.45c0 .126.05.238.132.32L8.93 10l-7.798 8.23a.45.45 0 0 0 .636.639l8.1-8.55A.448.448 0 0 0 10 10a.448.448 0 0 0-.132-.32"/> </svg></a>',
			prevArrow: '<a href="#/" class="arrow arrow-prev"><svg xmlns="http://www.w3.org/2000/svg" width="11" height="20" viewBox="0 0 11 20"> <path fill="#FFF" fill-rule="evenodd" stroke="#FFF" d="M1.132 10.32l8.1 8.55a.45.45 0 0 0 .768-.32.448.448 0 0 0-.132-.32L2.07 10l7.798-8.23a.45.45 0 0 0-.636-.639l-8.1 8.55A.448.448 0 0 0 1 10c0 .126.05.239.132.32"/> </svg></a>'
		});

		$('#homeSlider .slick-dots').css({
			left: 'calc(50% - '+($('#homeSlider .slick-dots').outerWidth()/2)+'px)'
		})

	}
	
	if($('.category_slider').is('.category_slider')) {
		
		$('.category_slider .slider_content .row').slick({
			infinite: false,
			slidesToShow: 6,
			arrows: true,
			rows: 0,
			slidesToScroll: 1,
			nextArrow: '<a href="#/" class="arrow arrow-next"><svg xmlns="http://www.w3.org/2000/svg" width="11" height="20" viewBox="0 0 11 20"> <path fill="#FFF" fill-rule="evenodd" stroke="#FFF" d="M9.868 9.68l-8.1-8.55A.45.45 0 0 0 1 1.45c0 .126.05.238.132.32L8.93 10l-7.798 8.23a.45.45 0 0 0 .636.639l8.1-8.55A.448.448 0 0 0 10 10a.448.448 0 0 0-.132-.32"/> </svg></a>',
			prevArrow: '<a href="#/" class="arrow arrow-prev"><svg xmlns="http://www.w3.org/2000/svg" width="11" height="20" viewBox="0 0 11 20"> <path fill="#FFF" fill-rule="evenodd" stroke="#FFF" d="M1.132 10.32l8.1 8.55a.45.45 0 0 0 .768-.32.448.448 0 0 0-.132-.32L2.07 10l7.798-8.23a.45.45 0 0 0-.636-.639l-8.1 8.55A.448.448 0 0 0 1 10c0 .126.05.239.132.32"/> </svg></a>'
		});

	}

	if($('.reviews__content').is('.reviews__content')) {
		
		$('.reviews__content .row').slick({
			infinite: false,
			slidesToShow: 2,
			arrows: true,
			rows: 0,
			slidesToScroll: 1,
			nextArrow: '<a href="#/" class="arrow arrow-next"><svg xmlns="http://www.w3.org/2000/svg" width="11" height="20" viewBox="0 0 11 20"> <path fill="#FFF" fill-rule="evenodd" stroke="#FFF" d="M9.868 9.68l-8.1-8.55A.45.45 0 0 0 1 1.45c0 .126.05.238.132.32L8.93 10l-7.798 8.23a.45.45 0 0 0 .636.639l8.1-8.55A.448.448 0 0 0 10 10a.448.448 0 0 0-.132-.32"/> </svg></a>',
			prevArrow: '<a href="#/" class="arrow arrow-prev"><svg xmlns="http://www.w3.org/2000/svg" width="11" height="20" viewBox="0 0 11 20"> <path fill="#FFF" fill-rule="evenodd" stroke="#FFF" d="M1.132 10.32l8.1 8.55a.45.45 0 0 0 .768-.32.448.448 0 0 0-.132-.32L2.07 10l7.798-8.23a.45.45 0 0 0-.636-.639l-8.1 8.55A.448.448 0 0 0 1 10c0 .126.05.239.132.32"/> </svg></a>'
		});

	}
	
	if($('#guaranteesSlider').is('#guaranteesSlider')) {
		
		$('#guaranteesSlider').slick({
			infinite: false,
			slidesToShow: 4,
			arrows: true,
			dots: true,
			rows: 0,
			slidesToScroll: 2,
			nextArrow: '<a href="#/" class="arrow arrow-next"><svg xmlns="http://www.w3.org/2000/svg" width="7" height="12" viewBox="0 0 7 12"><path fill="#89939B" fill-rule="evenodd" stroke="#89939B" d="M1.427 1.072A.25.25 0 0 0 1 1.25c0 .07.028.132.073.177L5.406 6l-4.333 4.572a.25.25 0 0 0 .353.355l4.5-4.75A.249.249 0 0 0 6 6a.249.249 0 0 0-.073-.177l-4.5-4.75z"/></svg></a>',
			prevArrow: '<a href="#/" class="arrow arrow-prev arrow--inactive"><svg xmlns="http://www.w3.org/2000/svg" width="7" height="12" viewBox="0 0 7 12"><path fill="#89939B" fill-rule="evenodd" stroke="#89939B" d="M1.073 6.177l4.5 4.75A.25.25 0 0 0 6 10.75a.249.249 0 0 0-.073-.177L1.594 6l4.333-4.572a.25.25 0 0 0-.354-.355l-4.5 4.75A.249.249 0 0 0 1 6c0 .07.028.133.073.177"/></svg></a>'
		});
		
		$('#guaranteesSlider').on('afterChange', function(){
			$('#guaranteesSlider').find('.arrow').removeClass('arrow--inactive');
			$('#guaranteesSlider').find('.slick-disabled').addClass('arrow--inactive');
		});

	}

	if($('#mustHaveSlider').is('#mustHaveSlider')) {
		
		$('#mustHaveSlider').slick({
			infinite: false,
			slidesToShow: 3,
			arrows: true,
			dots: true,
			rows: 0,
			slidesToScroll: 1,
			nextArrow: '<a href="#/" class="arrow arrow-next"><svg xmlns="http://www.w3.org/2000/svg" width="7" height="12" viewBox="0 0 7 12"><path fill="#89939B" fill-rule="evenodd" stroke="#89939B" d="M1.427 1.072A.25.25 0 0 0 1 1.25c0 .07.028.132.073.177L5.406 6l-4.333 4.572a.25.25 0 0 0 .353.355l4.5-4.75A.249.249 0 0 0 6 6a.249.249 0 0 0-.073-.177l-4.5-4.75z"/></svg></a>',
			prevArrow: '<a href="#/" class="arrow arrow-prev arrow--inactive"><svg xmlns="http://www.w3.org/2000/svg" width="7" height="12" viewBox="0 0 7 12"><path fill="#89939B" fill-rule="evenodd" stroke="#89939B" d="M1.073 6.177l4.5 4.75A.25.25 0 0 0 6 10.75a.249.249 0 0 0-.073-.177L1.594 6l4.333-4.572a.25.25 0 0 0-.354-.355l-4.5 4.75A.249.249 0 0 0 1 6c0 .07.028.133.073.177"/></svg></a>'
		});
		
		$('#mustHaveSlider').on('afterChange', function(){
			$('#mustHaveSlider').find('.arrow').removeClass('arrow--inactive');
			$('#mustHaveSlider').find('.slick-disabled').addClass('arrow--inactive');
		});

	}
	
	if($('#blogSlider').is('#blogSlider')) {
		
		$('#blogSlider').slick({
			infinite: false,
			slidesToShow: 4,
			arrows: true,
			rows: 0,
			slidesToScroll: 1,
			nextArrow: '<a href="#/" class="arrow arrow-next"><svg xmlns="http://www.w3.org/2000/svg" width="11" height="20" viewBox="0 0 11 20"> <path fill="#FFF" fill-rule="evenodd" stroke="#FFF" d="M9.868 9.68l-8.1-8.55A.45.45 0 0 0 1 1.45c0 .126.05.238.132.32L8.93 10l-7.798 8.23a.45.45 0 0 0 .636.639l8.1-8.55A.448.448 0 0 0 10 10a.448.448 0 0 0-.132-.32"/> </svg></a>',
			prevArrow: '<a href="#/" class="arrow arrow-prev"><svg xmlns="http://www.w3.org/2000/svg" width="11" height="20" viewBox="0 0 11 20"> <path fill="#FFF" fill-rule="evenodd" stroke="#FFF" d="M1.132 10.32l8.1 8.55a.45.45 0 0 0 .768-.32.448.448 0 0 0-.132-.32L2.07 10l7.798-8.23a.45.45 0 0 0-.636-.639l-8.1 8.55A.448.448 0 0 0 1 10c0 .126.05.239.132.32"/> </svg></a>'
		});

	}

})
$(function () {

	$('#stars_estimate a').hover(
		function() {
			var block = $(this).parents('#stars_estimate');
			var index = block.find('a').index($(this));

			for(var i = index; i >= 0; i--) {
				block.find('a').eq(i).find('svg path').css({
					fill: "#F5D17C"
				});
			}
		},
		function() {
			var block = $(this).parents('#stars_estimate');
			if(block.data('position') === undefined) {
				block.find('a').find('svg path').css({
					fill: "#C7C7C7"
				});
			}
			else {
				for(var i = 4; i >= (block.data('position') + 1); i--) {
					block.find('a').eq(i).find('svg path').css({
						fill: "#C7C7C7"
					});
				}
			}
		}
	);

	$('#stars_estimate a').click(function(e) {
		e.preventDefault();
		var block = $(this).parents('#stars_estimate');
		var index = block.find('a').index($(this));
		
		block.data('position', index);

		block.find('a').find('svg path').css({
			fill: "#C7C7C7"
		});
		for(var i = index; i >= 0; i--) {
			block.find('a').eq(i).find('svg path').css({
				fill: "#F5D17C"
			});
		}
	});

})
$(function () {
	var headerHeight = $('header').outerHeight();
	var breadHeight = $('.breadcrumbs').outerHeight();
	var previewHeight = $('.product_preview').outerHeight();
	var h_hght = headerHeight + breadHeight + previewHeight; // высота шапки
	var h_mrg = 0;    // отступ когда шапка уже не видна
  var elem = $('.product_menu');
  var top = $(window).scrollTop();

	$('.stars a').not('.trigger-disable').click(function(){
	  $('html, body').animate({scrollTop:$('#comments').position().top}, 800);
	});
	$('.breadcrumbs__bottom--left .text--grey').click(function(){
	  $('html, body').animate({scrollTop:$('#comments').position().top}, 800);
	});

	function scrollFunction(event, button, target, position1, position2) {
		event.preventDefault();
		top = $(window).scrollTop();
		$('.btn--product_menu').removeClass('btn--product_menu--active');
		button.addClass('btn--product_menu--active');
	  if(top < h_hght) {
			$('html, body').animate({scrollTop:$(''+target+'').position().top - position1}, 800);
		}
		else {
			$('html, body').animate({scrollTop:$(''+target+'').position().top - position2}, 800);
		}
	}

	$('#btnAbout').click(function(e){
		scrollFunction(e, $(this), $(this).attr('href'), 70, 20);
	});
	$('#btnReview').click(function(e){
		scrollFunction(e, $(this), $(this).attr('href'), 0, 0);
		$('#nav-review-tab').click();
	});
	$('#btnQuestion').click(function(e){
		scrollFunction(e, $(this), $(this).attr('href'), 0, 0);
		$('#nav-ansers-tab').click();
	});
	$('#btnSalons').click(function(e){
		scrollFunction(e, $(this), $(this).attr('href'), 0, 0);
		$('#nav-salons-tab').click();
	});
	$('#btnCredit').click(function(e){
		scrollFunction(e, $(this), $(this).attr('href'), 0, 0);
		$('#nav-credit-tab').click();
	});
	$('#btnProducts').click(function(e){
		scrollFunction(e, $(this), $(this).attr('href'), 160, 100);
	});

	var topAbout = $('#product_about').position();
	
	if($('#comments').is('#comments')) {
		var topTabs = $('#comments').position();
		topTabs.top = 400 + topTabs.top; 
		var topProducts = $('#products_list').position();

		$(window).scroll(function() {
			if($(window).scrollTop() > topProducts.top) {
				$('.product_menu a').removeClass('btn--product_menu--active');
				$('#btnProducts').addClass('btn--product_menu--active');
			}
			else if($(window).scrollTop() > topTabs.top) {
				$('.product_menu a').removeClass('btn--product_menu--active');
				var activeTab = $('#comments .btn.active');
				if(activeTab.attr('id') === 'nav-review-tab') 
					$('#btnReview').addClass('btn--product_menu--active');
				if(activeTab.attr('id') === 'nav-ansers-tab') 
					$('#btnQuestion').addClass('btn--product_menu--active');
				if(activeTab.attr('id') === 'nav-salons-tab') 
					$('#btnSalons').addClass('btn--product_menu--active');
				if(activeTab.attr('id') === 'nav-credit-tab') 
					$('#btnCredit').addClass('btn--product_menu--active');
			}
			else if($(window).scrollTop() > (topAbout.top + 100)) {
				$('.product_menu a').removeClass('btn--product_menu--active');
				$('#btnAbout').addClass('btn--product_menu--active');
			}
			else {
				$('.product_menu a').removeClass('btn--product_menu--active');
			}
		})
	}


})
$(function () {
	
	$('.btn__product__preview--info').map(function() {
		var self = this;
		if($(self).find('span b').html().length > 21) {

			var text = $(self).find('span b').html();
	    text = text.substring(0, 21);
	    var lastIndex = text.length; 
	    text = text.substring(0, lastIndex) + '...';

		  $(self).find('span b').html(text);
		}
	});

	$(' .product__block__bottom__header').map(function() {
		var self = this;
		var parent = $(this).parents('.products_list');
		
		if($(self).find('p').html().length > 59) {

			var text = $(self).find('p').html();
			if(parent.attr('class').indexOf('products_list--bg') > -1)
				text = text.substring(0, 110);
			else if($(window).outerWidth() < 430)
				text = text.substring(0, 85);
			else if($(window).outerWidth() < 768)
				text = text.substring(0, 53);
			else if($(window).outerWidth() < 992)
				text = text.substring(0, 51);
			else text = text.substring(0, 78);
	    var lastIndex = text.length; 
	    text = text.substring(0, lastIndex) + '...';

		  $(self).find('p').html(text);
		}
	});

});

$(function () {

	// инициализация
	$('.controll input').click(function() {
		$(this).parent('label').toggleClass('controll--active');
	});
	$('[data-toggle="tooltip"]').tooltip({
	});
	$('[data-toggle="tooltipc"]').tooltip({
		trigger: 'click',
	});

	$('[data-original-title="Избранное"').click(function() {
		if($(window).outerWidth() > 576) {
			$('.tooltip-inner:contains("Избранное")').css({
				marginLeft: "30px"
			})
			$('.tooltip-inner:contains("Избранное")').siblings('.arrow').css({
				marginLeft: "30px"
			})
			$('.tooltip-inner:contains("Избранное")').parents('.tooltip').css({
				left: "6px"
			});
		}
		else if($(window).outerWidth() <= 576) {
			$('.tooltip-inner:contains("Избранное")').css({
				marginLeft: "0px"
			})
			$('.tooltip-inner:contains("Избранное")').siblings('.arrow').css({
				marginLeft: "0px"
			})
			$('.tooltip-inner:contains("Избранное")').parents('.tooltip').css({
				left: "2px"
			});
		}
	})
	$('[data-original-title="Избранное"').tooltip('show');
	$('[data-original-title="Избранное"').click();
	$('[data-original-title="Избранное"').tooltip('hide');


	
	var canFavorites = true;

	$('#favorites').click(function() {
		if($(this).find('span').html().toLowerCase() === "В избранное".toLowerCase() && canFavorites) {
			canFavorites = false;
			$('#favorites_block').removeClass('bounceOutUp');
			$('#favorites_block').addClass('bounceInDown');
			$('#favorites_block').css({
				display: "flex"
			});
			$(this).find('span').html('В избранном');
			$(this).addClass('active');

			setTimeout(function() {
				canFavorites = true;
			},900);
		}
		else if(canFavorites) {
			canFavorites = false;
			$(this).find('span').html('В избранное');
			$(this).removeClass('active');
			$('#favorites_block').removeClass('bounceInDown');
			$('#favorites_block').addClass('bounceOutUp');
			setTimeout(function() {
				$('#favorites_block').hide();
				canFavorites = true;
			}, 900);
		}
	})

	var canCompare = true;

	$('#compare').click(function() {
		if($(this).find('span').html().toLowerCase() === "Сравнить".toLowerCase() && canCompare) {
			canCompare = false;
			$('#compare_block').removeClass('bounceOutUp');
			$('#compare_block').addClass('bounceInDown');
			$('#compare_block').css({
				display: "flex"
			});
			$(this).find('span').html('В сравнении');
			$(this).addClass('active');
			setTimeout(function() {
				canCompare = true;
			},900);
		}
		else if(canCompare) {
			canCompare = false;
			$(this).find('span').html('Сравнить');
			$(this).removeClass('active');
			$('#compare_block').removeClass('bounceInDown');
			$('#compare_block').addClass('bounceOutUp');
			setTimeout(function() {
				$('#compare_block').hide();
				canCompare = true;
			}, 900);
		}
	})
	
	$('body').click(function(event) {

		if (!$(event.target).closest($('#compare_block')).length) {
			if(($(event.target).parents('.compare').length === 0 && $(event.target).parents('#compare').length !== 1) || ($(event.target).parents('#compare').length === 0 && $(event.target).parents('.compare').length !== 1)) {
				$('#compare_block').removeClass('bounceInDown');
				$('#compare_block').addClass('bounceOutUp');
				setTimeout(function() {
					$('#compare_block').hide();
				}.bind(this), 900);
			}
		}

		if (!$(event.target).closest($('#favorites_block')).length) {
			if(($(event.target).parents('.like').length === 0  && $(event.target).parents('#favorites').length !== 1) || ($(event.target).parents('#favorites').length === 0 && $(event.target).parents('.like').length !== 1)) {
				$('#favorites_block').removeClass('bounceInDown');
				$('#favorites_block').addClass('bounceOutUp');
				setTimeout(function() {
					$('#favorites_block').hide();
				}.bind(this), 900);
			}
		}

		if (!$(event.target).closest($('#changeSave')).length) {
			if(($(event.target).parents('#changeSave').length === 0  && $(event.target).parents('#btnSave').length !== 1) || ($(event.target).parents('#changeSave').length === 0 && $(event.target).parents('#btnSave').length !== 1)) {
				$('#changeSave').removeClass('bounceInDown');
				$('#changeSave').addClass('bounceOutUp');
				setTimeout(function() {
					$('#changeSave').hide();
				}.bind(this), 900);
			}
		}

	});

	$('.massage__block .btn--sm_close').click(function(e) {
		e.preventDefault();

		$(this).parents('.massage__block').removeClass('bounceInDown');
		$(this).parents('.massage__block').addClass('bounceOutUp');
		setTimeout(function() {
			$(this).parents('.massage__block').hide();
		}.bind(this), 900);
	})


	$('.btn--icon.like').click(function(e) {
		e.preventDefault();
		e.stopPropagation();
		$(this).toggleClass('active');

		if($(this).attr('class').search('active') > 0) {
			$('#favorites_block').removeClass('bounceOutUp');
			$('#favorites_block').addClass('bounceInDown');
	
			$('#compare_block').removeClass('bounceInDown');
			$('#compare_block').addClass('bounceOutUp');
			setTimeout(function() {
				$('#compare_block').hide();
			}.bind(this), 900);
			$('#favorites_block').css({
				display: "flex"
			});
		}
		else {
			$('#favorites_block').addClass('bounceOutUp');
			$('#favorites_block').removeClass('bounceInDown');
			setTimeout(function() {
				$('#favorites_block').hide();
			}.bind(this), 900);
		}
	})
	$('.btn--icon.compare').click(function(e) {
		e.preventDefault();
		e.stopPropagation();
		$(this).toggleClass('active');

		if($(this).attr('class').search('active') > 0) {
			$('#compare_block').removeClass('bounceOutUp');
			$('#compare_block').addClass('bounceInDown');

			$('#favorites_block').removeClass('bounceInDown');
			$('#favorites_block').addClass('bounceOutUp');
			setTimeout(function() {
				$('#favorites_block').hide();
			}.bind(this), 900);
			$('#compare_block').css({
				display: "flex"
			});
		}
		else {
			$('#compare_block').addClass('bounceOutUp');
			$('#compare_block').removeClass('bounceInDown');
			setTimeout(function() {
				$('#compare_block').hide();
			}.bind(this), 900);
		}
	})

	$('#btnSave').click(function(e) {
		e.preventDefault();
		e.stopPropagation();

		$('#changeSave').removeClass('bounceOutUp');
		$('#changeSave').show();
		$('#changeSave').addClass('bounceInDown');
	})

});
$(function () {
	// пауза видео при закрытии модального окна
	$(function () {
		var videoSrc = $('#videoModal iframe')
		var originalSrc = $('#videoModal iframe').attr('src');
		var newSrc = videoSrc.attr('src', originalSrc + "?rel=0&enablejsapi=1");
		
		$('.btn__close--youtube').click(function(event) {
			 $("iframe").each(function() {
		      $(this)[0].contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}', '*')});
		});
  })
})